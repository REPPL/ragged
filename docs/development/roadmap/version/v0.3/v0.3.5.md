# v0.3.5 - Modern Document Processing

**Category:** State-of-the-Art OCR & Document Intelligence

**Estimated Time:** 55-62 hours

**Status:** Planned

---

## Overview

**Architecture Change:** Replace Tesseract + Camelot with Docling + PaddleOCR for state-of-the-art document processing.

**Performance:** 30× faster, 97.9% table accuracy, automatic messy PDF handling

---

## Features

### FEAT-007: Docling Primary Processor (15-18h)

**Capabilities:**
- Layout analysis (DocLayNet model)
- Table extraction (TableFormer - 97.9% accuracy)
- Reading order preservation
- Formula recognition (when available)
- Structured output (Markdown + JSON)
- 30× faster than traditional OCR

**Processing:**
- Born-digital PDFs: Computer vision-based extraction
- Scanned PDFs: Built-in EasyOCR integration
- Structured output for RAG pipelines

### FEAT-008: PaddleOCR Fallback Engine (10-12h)

**Purpose:** Handle worst-case messy documents

**Capabilities:**
- Rotated/skewed text detection (slanted bounding boxes)
- Poor quality scan handling
- 80+ languages
- Handwriting recognition
- Fully offline/privacy-preserving

**Routing:** Confidence < 85% triggers fallback

### FEAT-019: Document Quality Assessment (8-10h)

**Auto-Detection:**
- Born-digital vs scanned
- Quality scoring per page
- Confidence tracking
- Engine selection logic

**Thresholds:**
- High confidence (>85%): Use Docling results
- Medium (70-85%): Consider fallback
- Low (<70%): Always use PaddleOCR

### FEAT-020: Vision Integration (7-8h)

**Integration:**
- Keep Ollama llava for image understanding
- Integrate with Docling's image extraction
- Generate image descriptions and alt text

---

## Processing Pipeline

```
Document → Quality Assessment
    ↓
Born-Digital? → Docling (computer vision)
    ↓
Scanned/Messy? → Docling (with built-in EasyOCR)
    ↓
Confidence < 85%? → PaddleOCR (fallback)
    ↓
Structured Output (Markdown + JSON)
```

---

## Dependencies

### Removed (v0.3.5)
```toml
# pytesseract = "^0.3.10"      # Replaced
# camelot-py = "^0.11.0"       # Replaced
```

### Added (v0.3.5)
```toml
docling = "^2.0.0"              # MIT - Primary processor
paddleocr = "^2.8.0"            # Apache 2.0 - Fallback
paddlepaddle = "^2.6.0"         # Apache 2.0
opencv-python = "^4.8.0"        # BSD - Image preprocessing
Pillow = "^10.0.0"              # HPND - Image handling
```

---

## Quality Targets

| Document Type | Accuracy | Speed |
|---------------|----------|-------|
| Born-digital PDFs | 99% | <1 sec/page |
| Clean scans | 98% | 2-3 sec/page |
| Messy scans | 95% | 5-8 sec/page |

---

## Agent Workflow (12-14h)

1. **architecture-advisor (3h):** OCR architecture review
2. **documentation-architect (3h):** OCR pipeline docs + migration guide
3. **documentation-auditor (3-4h):** Comprehensive review
4. **git-documentation-committer (3-4h):** Commit

---

## Deliverables

- Docling as primary document processor
- PaddleOCR fallback for messy documents
- Confidence-based routing
- Vision integration maintained
- Migration guide from Tesseract

---

## Success Criteria

- ✅ Docling accuracy > 95% on born-digital PDFs
- ✅ Docling + PaddleOCR accuracy > 90% on messy scans
- ✅ Processing speed 5× faster than Tesseract
- ✅ Table extraction accuracy > 90%
- ✅ Layout preservation working correctly

---

## Related Documentation

- [Docling OCR Decision ADR](../../../decisions/2025-11-17-docling-ocr-decision.md) - Full decision rationale
- [Multi-Modal Support Features](./features/multi-modal-support.md) - Needs update
- [v0.3.6 - Messy Document Intelligence](./v0.3.6.md) - Automated correction

---

**Status:** Planned
