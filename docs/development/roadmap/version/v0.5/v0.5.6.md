# v0.5.6: Documentation - Tutorials & Manual Testing

**Focus:** User onboarding and manual testing documentation

**Hours:** 20-26 hours

**Dependencies:** v0.5.0 through v0.5.5 (all features complete and tested)

**Status:** Planned

---

## Overview

Version 0.5.6 creates comprehensive user-facing documentation, tutorials, and manual testing procedures for all v0.5.x features. This version enables user adoption and provides quality assurance through manual validation.

**What This Version Delivers:**
- Getting Started tutorial (vision RAG basics)
- Multi-Modal Query Strategies tutorial
- GPU Configuration & Optimisation guide
- 15 manual testing procedures
- Example notebooks with real PDFs
- Complete API documentation

**Why This Version is Critical:**
- First point of contact for new users
- Enables self-service learning and troubleshooting
- Manual tests catch issues automated tests miss
- Examples demonstrate real-world use cases

**Scope:** User-facing documentation only. Developer documentation created during feature implementation.

---

## Documentation Plan

### Phase 1: Tutorials (10-12 hours)

**Session 1.1: Getting Started Tutorial (4-5h)**

**Tutorial:** "Getting Started with Vision RAG"

**Covers:**
1. Installation (with vision dependencies)
2. First document ingestion (text-only)
3. First document ingestion (with vision)
4. Text query basics
5. Image query introduction
6. Viewing results

**Example:**
```markdown
## Step 1: Installation

Install ragged with vision support:

\`\`\`bash
pip install ragged[vision]
\`\`\`

This installs PyTorch, Transformers, and ColPali dependencies.

## Step 2: Ingest Your First Document (Text-Only)

\`\`\`bash
ragged ingest pdf research_paper.pdf
\`\`\`

This creates text embeddings for semantic search.

## Step 3: Query Your Document

\`\`\`bash
ragged query text "neural architecture"
\`\`\`

## Step 4: Enable Vision (GPU Required)

\`\`\`bash
ragged ingest pdf research_paper.pdf --vision
\`\`\`

This creates vision embeddings for diagrams and visual content.
```

**Deliverable:**
- `docs/tutorials/getting-started-vision-rag.md` (~150 lines)

**Time:** 4-5 hours

---

**Session 1.2: Multi-Modal Query Strategies (3-4h)**

**Tutorial:** "Multi-Modal Query Strategies"

**Covers:**
1. When to use text vs image vs hybrid queries
2. Visual boosting for diagram-heavy queries
3. Weight tuning for hybrid queries
4. Query expansion techniques
5. Interpreting results

**Example:**
```markdown
## When to Use Image Queries

Use image queries when:
- You have a visual example (diagram, chart)
- Text descriptions are ambiguous
- Visual similarity is primary criteria

**Example:** Finding architecture diagrams similar to a sketch

\`\`\`bash
ragged query image architecture_sketch.png --num-results 5
\`\`\`

## When to Use Hybrid Queries

Hybrid queries combine text and visual similarity:

\`\`\`bash
ragged query hybrid "authentication flow" example_diagram.png \\
  --text-weight 0.6 --vision-weight 0.4
\`\`\`

**Weight Tuning Guidelines:**
- More text weight (0.7-0.8): Conceptual queries
- More vision weight (0.6-0.7): Visual similarity primary
- Balanced (0.5-0.5): Equal importance
```

**Deliverable:**
- `docs/tutorials/multi-modal-query-strategies.md` (~120 lines)

**Time:** 3-4 hours

---

**Session 1.3: GPU Configuration & Optimisation (3-4h)**

**Tutorial:** "GPU Configuration & Optimisation"

**Covers:**
1. GPU requirements and recommendations
2. Device selection (CUDA, MPS, CPU)
3. Batch size configuration
4. Memory optimisation techniques
5. Troubleshooting OOM errors
6. Performance benchmarking

**Example:**
```markdown
## GPU Requirements

**Recommended:**
- NVIDIA GPU with 8GB+ VRAM
- Apple Silicon M1/M2/M3 with 16GB+ unified memory

**Minimum:**
- NVIDIA GPU with 4GB VRAM (limited batch sizes)
- CPU-only (slow, 10x+ slower than GPU)

## Choosing the Right Batch Size

Ragged uses adaptive batch sizing by default:

\`\`\`bash
# Adaptive (recommended)
ragged ingest pdf document.pdf --vision

# Fixed batch size
ragged ingest pdf document.pdf --vision --batch-size 8
\`\`\`

## Monitoring GPU During Ingestion

\`\`\`bash
# Terminal 1: Monitor GPU
ragged gpu stats --watch

# Terminal 2: Ingest
ragged ingest batch ./documents/ --vision
\`\`\`
```

**Deliverable:**
- `docs/tutorials/gpu-configuration-optimisation.md` (~130 lines)

**Time:** 3-4 hours

---

### Phase 2: Manual Testing Procedures (6-8 hours)

**Session 2.1: Manual Test Documentation (6-8h)**

**15 Manual Testing Procedures:**

1. **Visual Content Quality Tests** (5 procedures)
   - Diagram detection accuracy
   - Table detection accuracy
   - Chart/graph capture quality
   - Layout complexity assessment
   - Handwriting and annotations

2. **Multi-Modal Query Tests** (5 procedures)
   - Text query precision
   - Image query recall
   - Hybrid query fusion accuracy
   - Visual boosting effectiveness
   - Cross-modal consistency

3. **Cross-Platform Tests** (3 procedures)
   - CUDA performance validation
   - MPS (Apple Silicon) compatibility
   - CPU fallback functionality

4. **GPU Management Tests** (2 procedures)
   - OOM recovery validation
   - Adaptive batch sizing verification

**Example Manual Test:**
```markdown
## MT-005: Diagram Detection Accuracy

**Objective:** Verify ColPali correctly identifies pages with diagrams.

**Prerequisites:**
- Test PDF with diagrams: `test_diagrams.pdf` (10 pages: 5 with diagrams, 5 without)
- Vision embeddings enabled

**Procedure:**
1. Ingest test PDF with vision:
   \`\`\`bash
   ragged ingest pdf test_diagrams.pdf --vision
   \`\`\`

2. Query storage for diagram metadata:
   \`\`\`python
   from ragged.storage.dual_store import DualEmbeddingStore
   store = DualEmbeddingStore()
   results = store.get_by_document(doc_id)
   diagram_pages = [m["page_number"] for m in results["metadatas"]
                    if m.get("has_diagrams")]
   \`\`\`

3. Verify diagram detection:
   - Expected: Pages 1, 3, 5, 7, 9
   - Actual: Compare with `diagram_pages`

**Success Criteria:**
- Precision >= 80% (low false positives)
- Recall >= 90% (catches most diagrams)
- No false positives on text-only pages

**Result:** [ ] Pass [ ] Fail

**Notes:** _________________________________
```

**Deliverable:**
- `docs/testing/manual-tests/` directory with 15 test procedures

**Time:** 6-8 hours

---

### Phase 3: Examples & API Docs (4-6 hours)

**Session 3.1: Example Notebooks (2-3h)**

**3 Jupyter Notebooks:**

1. **Example 1:** Basic Vision RAG Workflow
   - Ingest PDF with vision
   - Text query
   - Image query
   - Hybrid query

2. **Example 2:** Multi-Document Analysis
   - Batch ingestion
   - Cross-document visual similarity
   - Result aggregation

3. **Example 3:** Advanced GPU Management
   - Manual device selection
   - Memory monitoring
   - Batch size tuning

**Deliverable:**
- `examples/01-basic-vision-rag.ipynb` (~100 cells)
- `examples/02-multi-document-analysis.ipynb` (~80 cells)
- `examples/03-advanced-gpu-management.ipynb` (~60 cells)

**Time:** 2-3 hours

---

**Session 3.2: API Documentation (2-3h)**

**Complete API Reference:**
- ColPaliEmbedder class
- DualEmbeddingStore class
- VisionRetriever class
- DeviceManager class
- All CLI commands

**Auto-generated with Sphinx:**
```bash
# Generate API docs
cd docs/
make api
```

**Manual additions:**
- Usage examples for each class
- Common patterns
- Best practices

**Deliverable:**
- `docs/api/` directory with complete API reference

**Time:** 2-3 hours

---

## Implementation Checklist

- [ ] **Phase 1** (10-12h): Tutorials
  - [ ] Getting Started tutorial
  - [ ] Multi-Modal Query Strategies
  - [ ] GPU Configuration guide

- [ ] **Phase 2** (6-8h): Manual Testing
  - [ ] 15 manual test procedures
  - [ ] Test data preparation

- [ ] **Phase 3** (4-6h): Examples & API
  - [ ] 3 example notebooks
  - [ ] Complete API documentation

---

## Success Criteria

### Tutorial Quality

- [ ] All tutorials tested by external reviewer
- [ ] Examples work on fresh installation
- [ ] Screenshots and diagrams included
- [ ] Estimated completion time listed
- [ ] Prerequisites clearly stated

### Manual Test Quality

- [ ] All 15 procedures documented
- [ ] Success criteria clearly defined
- [ ] Expected vs actual comparison
- [ ] Failure troubleshooting included

### API Documentation

- [ ] All public methods documented
- [ ] Usage examples for each class
- [ ] Return types and exceptions documented
- [ ] British English throughout

---

## Files Created

**New Files (~1,300 lines):**
- `docs/tutorials/getting-started-vision-rag.md` (~150 lines)
- `docs/tutorials/multi-modal-query-strategies.md` (~120 lines)
- `docs/tutorials/gpu-configuration-optimisation.md` (~130 lines)
- `docs/testing/manual-tests/*.md` (15 files, ~900 lines total)
- `examples/*.ipynb` (3 notebooks, ~240 cells)

---

## Related Documentation

**Context:**
- [v0.5.x Overview](./README.md)
- [Testing Specification](./testing.md)

**Dependencies:**
- All of v0.5.0 through v0.5.5 (features and tests complete)

**Next Steps:**
- [v0.5.7: Security](./v0.5.7.md) - Final polish before production

---

**Status:** Planned - User onboarding and manual testing
